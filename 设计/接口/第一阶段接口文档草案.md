# 第一阶段接口文档草案

Host: http://xxx.xxx.xxx.xxx

## 账户

### 登录

Request:

URL: `/login` 

POST

```javascript
post_data = {
    'account': 'balabala',
    'passwd': 'ba1aba1aba1aba1aba1aba1aba1aba1a'  // 32位MD5
}
```



Response:

- 用户不存在
- 密码错误
- 成功：`"账户类型", 200` （参照数据库中的账户类型说明，返回字符串）
- 其他...



通过session记录登录状态



### 修改密码

Request:

URL: `/change_passwd`

POST

```javascript
post_data = {
    'old_passwd': 'ba1aba1aba1aba1aba1aba1aba1aba11',  // 32位MD5
    'new_passwd': 'ba1aba1aba1aba1aba1aba1aba1aba1a'  // 32位MD5
}
```



Response:

- 未登录
- 旧密码错误
- 成功：`200`
- 其他...



### 登出

Request:

URL: `/logout`

GET



Response:

- 未登录
- 成功：`200`
- 其他



## 学生端功能

### 获取课表

Request:

URL: `/mine_class`

GET



Response:

- 未登录
- 成功：`JSON, 200`

```javascript
JSON = [
    {
        'course_id': '',
        'course_name': '',
        'instructor_name': ['', ''],  // 如果有多位老师
        'classroom_id': '',
        'week': '',
        'day': '',
        'section': ''
    },
    // {...},
]
```

- 其他



### 获取成绩单

Request:

URL: `/mine_grade`

GET



Response:

- 未登录
- 成功：`JSON, 200`

```javascript
JSON = [
    {
        'course_id': '',
        'name': '',  // 课程名
        'type': '',  // 课程属性
        'credit': '',
        'grade': ''
    },
    // {...},
]
```

- 其他



### 查看可选课信息

Request:

URL: `/class_list`

GET



Response:

- 未登录
- 成功：`JSON, 200`

```javascript
JSON = [
    {
        'class_id': '',
        'course_id': '',
        'course_name': '',
        'type': '',  // 课程属性
        'credit': '',
        'period': '',
        'instructor_name': ['', ''],
        'classroom_id': '',
        'day': ['', ''],  // 如果一周要上多节
    },
    // {...},
]
```

- 其他



### 选课

Request:

URL: `/choice_class`

POST

```javascript
post_data = {
    'class_id': ''
}
```



Response:

- 未登录：
- 已选：
- 成功：`200`
- 不能选课
- 其他



